<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 R Shiny | Statistical Learning of Infectious Disease Data Analytics</title>
  <meta name="description" content="The use of statistical models to understand infectious disease dynamics has a very rich history in epidemiology. This book introduces modern statistical models and state-of-the-art learning methods to analyze infectious disease data. Many of the key approaches, examples and case studies will be presented. The primary emphasis will be interpretation, inference and hands-on data analyses. This course also provides practical concepts and R computing skills to perform infectious disease data analysis and visualization." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 R Shiny | Statistical Learning of Infectious Disease Data Analytics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The use of statistical models to understand infectious disease dynamics has a very rich history in epidemiology. This book introduces modern statistical models and state-of-the-art learning methods to analyze infectious disease data. Many of the key approaches, examples and case studies will be presented. The primary emphasis will be interpretation, inference and hands-on data analyses. This course also provides practical concepts and R computing skills to perform infectious disease data analysis and visualization." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 R Shiny | Statistical Learning of Infectious Disease Data Analytics" />
  
  <meta name="twitter:description" content="The use of statistical models to understand infectious disease dynamics has a very rich history in epidemiology. This book introduces modern statistical models and state-of-the-art learning methods to analyze infectious disease data. Many of the key approaches, examples and case studies will be presented. The primary emphasis will be interpretation, inference and hands-on data analyses. This course also provides practical concepts and R computing skills to perform infectious disease data analysis and visualization." />
  

<meta name="author" content="Lily Wang" />


<meta name="date" content="2021-03-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="plotly.html"/>
<link rel="next" href="map.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3.9000/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#data-sets-used-in-labs-and-exercises"><i class="fa fa-check"></i><b>1.1</b> Data Sets Used in Labs and Exercises</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.2</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i><b>1.3</b> About the Author</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#aims-and-scope-of-this-book"><i class="fa fa-check"></i><b>2.1</b> Aims and Scope of This Book</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#the-structure-of-this-book"><i class="fa fa-check"></i><b>2.2</b> The Structure of This Book</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#infectious-disease-data"><i class="fa fa-check"></i><b>2.2.1</b> Infectious disease data</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro.html"><a href="intro.html#basic-characteristics-of-the-infection-process"><i class="fa fa-check"></i><b>2.2.2</b> Basic characteristics of the infection process</a></li>
<li class="chapter" data-level="2.2.3" data-path="intro.html"><a href="intro.html#data-visualization"><i class="fa fa-check"></i><b>2.2.3</b> Data visualization</a></li>
<li class="chapter" data-level="2.2.4" data-path="intro.html"><a href="intro.html#modeling-and-forecasting"><i class="fa fa-check"></i><b>2.2.4</b> Modeling and Forecasting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3</b> Data Wrangling with <code>dplyr</code> and <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="dplyr.html"><a href="dplyr.html#learning-dplyr"><i class="fa fa-check"></i><b>3.1</b> Learning <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="dplyr.html"><a href="dplyr.html#tibbles"><i class="fa fa-check"></i><b>3.1.1</b> Tibbles</a></li>
<li class="chapter" data-level="3.1.2" data-path="dplyr.html"><a href="dplyr.html#import-data"><i class="fa fa-check"></i><b>3.1.2</b> Import data</a></li>
<li class="chapter" data-level="3.1.3" data-path="dplyr.html"><a href="dplyr.html#common-dplyr-functions"><i class="fa fa-check"></i><b>3.1.3</b> Common <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html#selecting-columns-and-filtering-rows"><i class="fa fa-check"></i><b>3.2</b> Selecting Columns and Filtering Rows</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="dplyr.html"><a href="dplyr.html#subset-variables-columns"><i class="fa fa-check"></i><b>3.2.1</b> Subset Variables (Columns)</a></li>
<li class="chapter" data-level="3.2.2" data-path="dplyr.html"><a href="dplyr.html#subset-observations-rows"><i class="fa fa-check"></i><b>3.2.2</b> Subset Observations (Rows)</a></li>
<li class="chapter" data-level="3.2.3" data-path="dplyr.html"><a href="dplyr.html#pipes"><i class="fa fa-check"></i><b>3.2.3</b> Pipes</a></li>
<li class="chapter" data-level="3.2.4" data-path="dplyr.html"><a href="dplyr.html#select-and-order-top-n-entries-by-group-if-grouped-data."><i class="fa fa-check"></i><b>3.2.4</b> Select and order top n entries (by group if grouped data).</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dplyr.html"><a href="dplyr.html#make-new-variables-mutate"><i class="fa fa-check"></i><b>3.3</b> Make New Variables: Mutate</a></li>
<li class="chapter" data-level="3.4" data-path="dplyr.html"><a href="dplyr.html#summarize-data"><i class="fa fa-check"></i><b>3.4</b> Summarize Data</a></li>
<li class="chapter" data-level="3.5" data-path="dplyr.html"><a href="dplyr.html#combine-data-sets"><i class="fa fa-check"></i><b>3.5</b> Combine Data Sets</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="dplyr.html"><a href="dplyr.html#the-join-family"><i class="fa fa-check"></i><b>3.5.1</b> The join family</a></li>
<li class="chapter" data-level="3.5.2" data-path="dplyr.html"><a href="dplyr.html#toy-examples-with-joins"><i class="fa fa-check"></i><b>3.5.2</b> Toy examples with joins</a></li>
<li class="chapter" data-level="3.5.3" data-path="dplyr.html"><a href="dplyr.html#practice-with-joins-for-real-data"><i class="fa fa-check"></i><b>3.5.3</b> Practice with joins for real data</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="dplyr.html"><a href="dplyr.html#reshaping-data"><i class="fa fa-check"></i><b>3.6</b> Reshaping Data</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="dplyr.html"><a href="dplyr.html#from-wide-to-long"><i class="fa fa-check"></i><b>3.6.1</b> From wide to long</a></li>
<li class="chapter" data-level="3.6.2" data-path="dplyr.html"><a href="dplyr.html#from-long-to-wide"><i class="fa fa-check"></i><b>3.6.2</b> From long to wide</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="dplyr.html"><a href="dplyr.html#exercises"><i class="fa fa-check"></i><b>3.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with ggplot2</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="ggplot2.html"><a href="ggplot2.html#types-of-variables-and-preparation"><i class="fa fa-check"></i><b>4.2</b> Types of Variables and Preparation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ggplot2.html"><a href="ggplot2.html#types-of-variables"><i class="fa fa-check"></i><b>4.2.1</b> Types of Variables</a></li>
<li class="chapter" data-level="4.2.2" data-path="ggplot2.html"><a href="ggplot2.html#rules-for-graph-designing"><i class="fa fa-check"></i><b>4.2.2</b> Rules for Graph Designing</a></li>
<li class="chapter" data-level="4.2.3" data-path="ggplot2.html"><a href="ggplot2.html#installing-packages-and-loading-data"><i class="fa fa-check"></i><b>4.2.3</b> Installing packages and loading data</a></li>
<li class="chapter" data-level="4.2.4" data-path="ggplot2.html"><a href="ggplot2.html#your-first-scatterplot"><i class="fa fa-check"></i><b>4.2.4</b> Your first scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ggplot2.html"><a href="ggplot2.html#position-scales-and-axes"><i class="fa fa-check"></i><b>4.3</b> Position Scales and Axes</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ggplot2.html"><a href="ggplot2.html#change-the-labels-of-the-axis-using-xlab-and-ylab"><i class="fa fa-check"></i><b>4.3.1</b> Change the labels of the axis using <code>xlab()</code> and <code>ylab()</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="ggplot2.html"><a href="ggplot2.html#change-the-range-of-the-axis-using-xlim-and-ylim"><i class="fa fa-check"></i><b>4.3.2</b> Change the range of the axis using <code>xlim()</code> and <code>ylim()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ggplot2.html"><a href="ggplot2.html#color-scales-and-size-of-geom_points"><i class="fa fa-check"></i><b>4.4</b> Color Scales and Size of <code>geom_points()</code></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ggplot2.html"><a href="ggplot2.html#change-the-color-of-all-points"><i class="fa fa-check"></i><b>4.4.1</b> Change the color of all points</a></li>
<li class="chapter" data-level="4.4.2" data-path="ggplot2.html"><a href="ggplot2.html#color-the-observations-by-the-value-of-a-feature"><i class="fa fa-check"></i><b>4.4.2</b> Color the observations by the value of a feature</a></li>
<li class="chapter" data-level="4.4.3" data-path="ggplot2.html"><a href="ggplot2.html#change-the-color-palette"><i class="fa fa-check"></i><b>4.4.3</b> Change the color palette</a></li>
<li class="chapter" data-level="4.4.4" data-path="ggplot2.html"><a href="ggplot2.html#change-the-size-by-the-value-of-a-feature"><i class="fa fa-check"></i><b>4.4.4</b> Change the size by the value of a feature</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ggplot2.html"><a href="ggplot2.html#individual-geoms"><i class="fa fa-check"></i><b>4.5</b> Individual geoms</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ggplot2.html"><a href="ggplot2.html#histogram"><i class="fa fa-check"></i><b>4.5.1</b> Histogram</a></li>
<li class="chapter" data-level="4.5.2" data-path="ggplot2.html"><a href="ggplot2.html#bar-chart"><i class="fa fa-check"></i><b>4.5.2</b> Bar chart</a></li>
<li class="chapter" data-level="4.5.3" data-path="ggplot2.html"><a href="ggplot2.html#default-bar-chart"><i class="fa fa-check"></i><b>4.5.3</b> Default bar chart</a></li>
<li class="chapter" data-level="4.5.4" data-path="ggplot2.html"><a href="ggplot2.html#bar-chart-with-assigned-value"><i class="fa fa-check"></i><b>4.5.4</b> Bar chart with assigned value</a></li>
<li class="chapter" data-level="4.5.5" data-path="ggplot2.html"><a href="ggplot2.html#legend"><i class="fa fa-check"></i><b>4.5.5</b> Legend</a></li>
<li class="chapter" data-level="4.5.6" data-path="ggplot2.html"><a href="ggplot2.html#boxplots-jittering-and-violin-plots"><i class="fa fa-check"></i><b>4.5.6</b> Boxplots, jittering and violin plots</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ggplot2.html"><a href="ggplot2.html#collective-geoms"><i class="fa fa-check"></i><b>4.6</b> Collective geoms</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="ggplot2.html"><a href="ggplot2.html#smoother"><i class="fa fa-check"></i><b>4.6.1</b> Smoother</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="ggplot2.html"><a href="ggplot2.html#time-series"><i class="fa fa-check"></i><b>4.7</b> Time Series</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="ggplot2.html"><a href="ggplot2.html#basic-line-plots"><i class="fa fa-check"></i><b>4.7.1</b> Basic line plots</a></li>
<li class="chapter" data-level="4.7.2" data-path="ggplot2.html"><a href="ggplot2.html#add-a-second-line"><i class="fa fa-check"></i><b>4.7.2</b> Add a second line</a></li>
<li class="chapter" data-level="4.7.3" data-path="ggplot2.html"><a href="ggplot2.html#add-ribbons"><i class="fa fa-check"></i><b>4.7.3</b> Add ribbons</a></li>
<li class="chapter" data-level="4.7.4" data-path="ggplot2.html"><a href="ggplot2.html#adjust-the-scale-of-time-axis"><i class="fa fa-check"></i><b>4.7.4</b> Adjust the scale of time axis</a></li>
<li class="chapter" data-level="4.7.5" data-path="ggplot2.html"><a href="ggplot2.html#add-annotations"><i class="fa fa-check"></i><b>4.7.5</b> Add annotations</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="ggplot2.html"><a href="ggplot2.html#maps"><i class="fa fa-check"></i><b>4.8</b> Maps</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="ggplot2.html"><a href="ggplot2.html#making-a-base-map"><i class="fa fa-check"></i><b>4.8.1</b> Making a base map</a></li>
<li class="chapter" data-level="4.8.2" data-path="ggplot2.html"><a href="ggplot2.html#customizing-choropleth-map"><i class="fa fa-check"></i><b>4.8.2</b> Customizing <code>choropleth</code> map</a></li>
<li class="chapter" data-level="4.8.3" data-path="ggplot2.html"><a href="ggplot2.html#overlay-polygon-maps"><i class="fa fa-check"></i><b>4.8.3</b> Overlay polygon maps</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="ggplot2.html"><a href="ggplot2.html#arranging-plots"><i class="fa fa-check"></i><b>4.9</b> Arranging Plots</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="ggplot2.html"><a href="ggplot2.html#facet"><i class="fa fa-check"></i><b>4.9.1</b> Facet</a></li>
<li class="chapter" data-level="4.9.2" data-path="ggplot2.html"><a href="ggplot2.html#combining-plots-using-patchwork-package"><i class="fa fa-check"></i><b>4.9.2</b> Combining plots using <code>patchwork</code> package</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="ggplot2.html"><a href="ggplot2.html#output"><i class="fa fa-check"></i><b>4.10</b> Output</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="ggplot2.html"><a href="ggplot2.html#save-in-figure-format"><i class="fa fa-check"></i><b>4.10.1</b> Save in figure format</a></li>
<li class="chapter" data-level="4.10.2" data-path="ggplot2.html"><a href="ggplot2.html#save-in-rds-format"><i class="fa fa-check"></i><b>4.10.2</b> Save in RDS format</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="ggplot2.html"><a href="ggplot2.html#exercises-1"><i class="fa fa-check"></i><b>4.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="plotly.html"><a href="plotly.html"><i class="fa fa-check"></i><b>5</b> Interactive Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="plotly.html"><a href="plotly.html#an-introduction"><i class="fa fa-check"></i><b>5.1</b> An Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="plotly.html"><a href="plotly.html#creating-plotly-objects"><i class="fa fa-check"></i><b>5.2</b> Creating Plotly Objects</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="plotly.html"><a href="plotly.html#using-plot_ly-to-create-a-plotly-object"><i class="fa fa-check"></i><b>5.2.1</b> Using <code>plot_ly()</code> to create a plotly object</a></li>
<li class="chapter" data-level="5.2.2" data-path="plotly.html"><a href="plotly.html#use-dplyr-verbs-to-modify-data"><i class="fa fa-check"></i><b>5.2.2</b> Use <code>dplyr</code> verbs to modify data</a></li>
<li class="chapter" data-level="5.2.3" data-path="plotly.html"><a href="plotly.html#using-ggplotly-to-create-a-plotly-object"><i class="fa fa-check"></i><b>5.2.3</b> Using <code>ggplotly()</code> to create a <code>plotly</code> object</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="plotly.html"><a href="plotly.html#scatterplots-and-line-plots"><i class="fa fa-check"></i><b>5.3</b> Scatterplots and Line Plots</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="plotly.html"><a href="plotly.html#make-a-scatterplot"><i class="fa fa-check"></i><b>5.3.1</b> Make a scatterplot</a></li>
<li class="chapter" data-level="5.3.2" data-path="plotly.html"><a href="plotly.html#markers"><i class="fa fa-check"></i><b>5.3.2</b> Markers</a></li>
<li class="chapter" data-level="5.3.3" data-path="plotly.html"><a href="plotly.html#a-single-time-series-plot"><i class="fa fa-check"></i><b>5.3.3</b> A single time series plot</a></li>
<li class="chapter" data-level="5.3.4" data-path="plotly.html"><a href="plotly.html#hover-text-and-template"><i class="fa fa-check"></i><b>5.3.4</b> Hover text and template</a></li>
<li class="chapter" data-level="5.3.5" data-path="plotly.html"><a href="plotly.html#multiple-time-series-plots"><i class="fa fa-check"></i><b>5.3.5</b> Multiple time series plots</a></li>
<li class="chapter" data-level="5.3.6" data-path="plotly.html"><a href="plotly.html#more-features-about-the-lines"><i class="fa fa-check"></i><b>5.3.6</b> More features about the lines</a></li>
<li class="chapter" data-level="5.3.7" data-path="plotly.html"><a href="plotly.html#add-ribbons-1"><i class="fa fa-check"></i><b>5.3.7</b> Add ribbons</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="plotly.html"><a href="plotly.html#pie-charts"><i class="fa fa-check"></i><b>5.4</b> Pie Charts</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="plotly.html"><a href="plotly.html#draw-static-pie-charts-using-ggplot2"><i class="fa fa-check"></i><b>5.4.1</b> Draw static pie charts using ggplot2</a></li>
<li class="chapter" data-level="5.4.2" data-path="plotly.html"><a href="plotly.html#draw-interactive-pie-charts"><i class="fa fa-check"></i><b>5.4.2</b> Draw interactive pie charts</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="plotly.html"><a href="plotly.html#animation"><i class="fa fa-check"></i><b>5.5</b> Animation</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="plotly.html"><a href="plotly.html#an-animation-of-the-evolution-of-infected-vs.-death-count"><i class="fa fa-check"></i><b>5.5.1</b> An animation of the evolution of infected vs. death count</a></li>
<li class="chapter" data-level="5.5.2" data-path="plotly.html"><a href="plotly.html#an-animation-of-the-state-level-time-series-plot-of-infected-count"><i class="fa fa-check"></i><b>5.5.2</b> An animation of the state-level time series plot of infected count</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="plotly.html"><a href="plotly.html#saving-html"><i class="fa fa-check"></i><b>5.6</b> Saving HTML</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="plotly.html"><a href="plotly.html#save-as-a-standalone-html-file"><i class="fa fa-check"></i><b>5.6.1</b> Save as a standalone HTML file</a></li>
<li class="chapter" data-level="5.6.2" data-path="plotly.html"><a href="plotly.html#save-as-non-selfcontained-html-file"><i class="fa fa-check"></i><b>5.6.2</b> Save as non-selfcontained HTML file</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="plotly.html"><a href="plotly.html#exercises-2"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>6</b> R Shiny</a>
<ul>
<li class="chapter" data-level="6.1" data-path="shiny.html"><a href="shiny.html#an-introduction-to-shiny"><i class="fa fa-check"></i><b>6.1</b> An Introduction to Shiny</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="shiny.html"><a href="shiny.html#your-first-shiny-app"><i class="fa fa-check"></i><b>6.1.1</b> Your first shiny app</a></li>
<li class="chapter" data-level="6.1.2" data-path="shiny.html"><a href="shiny.html#create-a-new-shiny-app-in-rstudio"><i class="fa fa-check"></i><b>6.1.2</b> Create a new shiny app in RStudio</a></li>
<li class="chapter" data-level="6.1.3" data-path="shiny.html"><a href="shiny.html#share-your-app"><i class="fa fa-check"></i><b>6.1.3</b> Share your app</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="shiny.html"><a href="shiny.html#useful-input-widgets"><i class="fa fa-check"></i><b>6.2</b> Useful Input Widgets</a></li>
<li class="chapter" data-level="6.3" data-path="shiny.html"><a href="shiny.html#displaying-reactive-output"><i class="fa fa-check"></i><b>6.3</b> Displaying Reactive Output</a></li>
<li class="chapter" data-level="6.4" data-path="shiny.html"><a href="shiny.html#rendering-plotly-inside-shiny"><i class="fa fa-check"></i><b>6.4</b> Rendering Plotly Inside Shiny</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>7</b> Interactive Geospatial Visualization</a>
<ul>
<li class="chapter" data-level="7.1" data-path="map.html"><a href="map.html#an-introduction-to-leaflet"><i class="fa fa-check"></i><b>7.1</b> An Introduction to Leaflet</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="map.html"><a href="map.html#more-references"><i class="fa fa-check"></i><b>7.1.1</b> More References</a></li>
<li class="chapter" data-level="7.1.2" data-path="map.html"><a href="map.html#features-and-installation"><i class="fa fa-check"></i><b>7.1.2</b> Features and installation</a></li>
<li class="chapter" data-level="7.1.3" data-path="map.html"><a href="map.html#basic-usage"><i class="fa fa-check"></i><b>7.1.3</b> Basic Usage</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="map.html"><a href="map.html#the-data-object"><i class="fa fa-check"></i><b>7.2</b> The Data Object</a></li>
<li class="chapter" data-level="7.3" data-path="map.html"><a href="map.html#choropleth-map"><i class="fa fa-check"></i><b>7.3</b> Choropleth map</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="map.html"><a href="map.html#create-a-base-map"><i class="fa fa-check"></i><b>7.3.1</b> Create a base map</a></li>
<li class="chapter" data-level="7.3.2" data-path="map.html"><a href="map.html#color-the-map"><i class="fa fa-check"></i><b>7.3.2</b> Color the map</a></li>
<li class="chapter" data-level="7.3.3" data-path="map.html"><a href="map.html#interactive-map"><i class="fa fa-check"></i><b>7.3.3</b> Interactive map</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="map.html"><a href="map.html#legend-1"><i class="fa fa-check"></i><b>7.4</b> Legend</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="map.html"><a href="map.html#classification-schemes"><i class="fa fa-check"></i><b>7.4.1</b> Classification schemes</a></li>
<li class="chapter" data-level="7.4.2" data-path="map.html"><a href="map.html#mapping-variables-to-colors"><i class="fa fa-check"></i><b>7.4.2</b> Mapping variables to colors</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="map.html"><a href="map.html#an-example-of-county-level-map"><i class="fa fa-check"></i><b>7.5</b> An Example of County-level Map</a></li>
<li class="chapter" data-level="7.6" data-path="map.html"><a href="map.html#spot-maps"><i class="fa fa-check"></i><b>7.6</b> Spot Maps</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="map.html"><a href="map.html#adding-circles"><i class="fa fa-check"></i><b>7.6.1</b> Adding circles</a></li>
<li class="chapter" data-level="7.6.2" data-path="map.html"><a href="map.html#add-popups"><i class="fa fa-check"></i><b>7.6.2</b> Add popups</a></li>
<li class="chapter" data-level="7.6.3" data-path="map.html"><a href="map.html#add-labels"><i class="fa fa-check"></i><b>7.6.3</b> Add labels</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="map.html"><a href="map.html#integrating-leaflet-with-r-shiny"><i class="fa fa-check"></i><b>7.7</b> Integrating Leaflet with R Shiny</a></li>
<li class="chapter" data-level="7.8" data-path="map.html"><a href="map.html#exercises-3"><i class="fa fa-check"></i><b>7.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>8</b> Epidemic Modeling</a>
<ul>
<li class="chapter" data-level="8.1" data-path="modeling.html"><a href="modeling.html#an-introduction-to-epidemic-modeling"><i class="fa fa-check"></i><b>8.1</b> An Introduction to Epidemic Modeling</a></li>
<li class="chapter" data-level="8.2" data-path="modeling.html"><a href="modeling.html#mechanistic-models"><i class="fa fa-check"></i><b>8.2</b> Mechanistic Models</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="modeling.html"><a href="modeling.html#compartment-modeling"><i class="fa fa-check"></i><b>8.2.1</b> Compartment Modeling</a></li>
<li class="chapter" data-level="8.2.2" data-path="modeling.html"><a href="modeling.html#agent-based-methods"><i class="fa fa-check"></i><b>8.2.2</b> Agent-based Methods</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="modeling.html"><a href="modeling.html#phenomenological-models"><i class="fa fa-check"></i><b>8.3</b> Phenomenological Models</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="modeling.html"><a href="modeling.html#time-series-analysis"><i class="fa fa-check"></i><b>8.3.1</b> Time Series Analysis</a></li>
<li class="chapter" data-level="8.3.2" data-path="modeling.html"><a href="modeling.html#regression-methods"><i class="fa fa-check"></i><b>8.3.2</b> Regression methods</a></li>
<li class="chapter" data-level="8.3.3" data-path="modeling.html"><a href="modeling.html#machine-learning-methods"><i class="fa fa-check"></i><b>8.3.3</b> Machine learning methods</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="modeling.html"><a href="modeling.html#hybrid-models-and-ensemble-methods"><i class="fa fa-check"></i><b>8.4</b> Hybrid Models and Ensemble Methods</a></li>
<li class="chapter" data-level="8.5" data-path="modeling.html"><a href="modeling.html#epidemic-modeling-mathematical-and-statistical-perspectives"><i class="fa fa-check"></i><b>8.5</b> Epidemic Modeling: Mathematical and Statistical Perspectives</a></li>
<li class="chapter" data-level="8.6" data-path="modeling.html"><a href="modeling.html#some-terminologies-in-epidemic-modeling"><i class="fa fa-check"></i><b>8.6</b> Some Terminologies in Epidemic Modeling</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="compartment.html"><a href="compartment.html"><i class="fa fa-check"></i><b>9</b> Compartment Models</a>
<ul>
<li class="chapter" data-level="9.1" data-path="compartment.html"><a href="compartment.html#a-simple-sis-model-a-model-for-diseases-with-no-immunity"><i class="fa fa-check"></i><b>9.1</b> A Simple SIS Model (A Model for Diseases with No Immunity)</a></li>
<li class="chapter" data-level="9.2" data-path="compartment.html"><a href="compartment.html#an-sir-model"><i class="fa fa-check"></i><b>9.2</b> An SIR Model</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="compartment.html"><a href="compartment.html#an-sir-model-with-births-and-deaths"><i class="fa fa-check"></i><b>9.2.1</b> An SIR model with births and deaths</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="compartment.html"><a href="compartment.html#sir-parameter-estimation"><i class="fa fa-check"></i><b>9.3</b> SIR parameter estimation</a></li>
<li class="chapter" data-level="9.4" data-path="compartment.html"><a href="compartment.html#implementation-of-parameter-estimation-in-r"><i class="fa fa-check"></i><b>9.4</b> Implementation of parameter estimation in R</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="compartment.html"><a href="compartment.html#example-1.-outbreak-of-measles-in-niamey"><i class="fa fa-check"></i><b>9.4.1</b> Example 1. Outbreak of measles in Niamey</a></li>
<li class="chapter" data-level="9.4.2" data-path="compartment.html"><a href="compartment.html#example-2.-covid-19-data"><i class="fa fa-check"></i><b>9.4.2</b> Example 2. COVID-19 data</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="compartment.html"><a href="compartment.html#basic-reproduction-number"><i class="fa fa-check"></i><b>9.5</b> Basic Reproduction Number</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="compartment.html"><a href="compartment.html#seir-model"><i class="fa fa-check"></i><b>9.5.1</b> SEIR Model</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="compartment.html"><a href="compartment.html#herd-immunity"><i class="fa fa-check"></i><b>9.6</b> Herd Immunity</a></li>
<li class="chapter" data-level="9.7" data-path="compartment.html"><a href="compartment.html#exercises-4"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="timeseries.html"><a href="timeseries.html"><i class="fa fa-check"></i><b>10</b> Time Series Analysis of Infectious Disease Data</a>
<ul>
<li class="chapter" data-level="10.1" data-path="timeseries.html"><a href="timeseries.html#datasets-and-r-packages"><i class="fa fa-check"></i><b>10.1</b> Datasets and R Packages</a></li>
<li class="chapter" data-level="10.2" data-path="timeseries.html"><a href="timeseries.html#time-series-plots"><i class="fa fa-check"></i><b>10.2</b> Time series plots</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="timeseries.html"><a href="timeseries.html#tsibble-objects"><i class="fa fa-check"></i><b>10.2.1</b> “tsibble” objects</a></li>
<li class="chapter" data-level="10.2.2" data-path="timeseries.html"><a href="timeseries.html#working-with-tsibble-objects"><i class="fa fa-check"></i><b>10.2.2</b> Working with “tsibble” objects</a></li>
<li class="chapter" data-level="10.2.3" data-path="timeseries.html"><a href="timeseries.html#drawing-time-series-plots"><i class="fa fa-check"></i><b>10.2.3</b> Drawing time series plots</a></li>
<li class="chapter" data-level="10.2.4" data-path="timeseries.html"><a href="timeseries.html#objectives-of-time-series-analysis"><i class="fa fa-check"></i><b>10.2.4</b> Objectives of Time Series Analysis</a></li>
<li class="chapter" data-level="10.2.5" data-path="timeseries.html"><a href="timeseries.html#autocorrelation"><i class="fa fa-check"></i><b>10.2.5</b> Autocorrelation</a></li>
<li class="chapter" data-level="10.2.6" data-path="timeseries.html"><a href="timeseries.html#autocorrelation-1"><i class="fa fa-check"></i><b>10.2.6</b> Autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="timeseries.html"><a href="timeseries.html#time-series-decomposition"><i class="fa fa-check"></i><b>10.3</b> Time Series Decomposition</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="timeseries.html"><a href="timeseries.html#box-cox-transformations"><i class="fa fa-check"></i><b>10.3.1</b> Box-Cox transformations</a></li>
<li class="chapter" data-level="10.3.2" data-path="timeseries.html"><a href="timeseries.html#methods-for-estimating-the-trend"><i class="fa fa-check"></i><b>10.3.2</b> Methods for estimating the trend</a></li>
<li class="chapter" data-level="10.3.3" data-path="timeseries.html"><a href="timeseries.html#seasonal-component"><i class="fa fa-check"></i><b>10.3.3</b> Seasonal component</a></li>
<li class="chapter" data-level="10.3.4" data-path="timeseries.html"><a href="timeseries.html#trend-and-seasonal-estimation"><i class="fa fa-check"></i><b>10.3.4</b> Trend and seasonal estimation:</a></li>
<li class="chapter" data-level="10.3.5" data-path="timeseries.html"><a href="timeseries.html#seasonal-and-trend-decomposition-using-loess-stl"><i class="fa fa-check"></i><b>10.3.5</b> Seasonal and trend decomposition using Loess (STL)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="timeseries.html"><a href="timeseries.html#simple-time-series-forecasting-approaches"><i class="fa fa-check"></i><b>10.4</b> Simple Time Series Forecasting Approaches</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="timeseries.html"><a href="timeseries.html#average-method"><i class="fa fa-check"></i><b>10.4.1</b> Average method</a></li>
<li class="chapter" data-level="10.4.2" data-path="timeseries.html"><a href="timeseries.html#random-walk-forecasts"><i class="fa fa-check"></i><b>10.4.2</b> Random walk forecasts</a></li>
<li class="chapter" data-level="10.4.3" data-path="timeseries.html"><a href="timeseries.html#seasonal-random-walk-forecasts"><i class="fa fa-check"></i><b>10.4.3</b> Seasonal random walk forecasts</a></li>
<li class="chapter" data-level="10.4.4" data-path="timeseries.html"><a href="timeseries.html#random-walk-with-drift-method"><i class="fa fa-check"></i><b>10.4.4</b> Random walk with drift method</a></li>
<li class="chapter" data-level="10.4.5" data-path="timeseries.html"><a href="timeseries.html#displaying-all-the-forecasting-results"><i class="fa fa-check"></i><b>10.4.5</b> Displaying all the forecasting results</a></li>
<li class="chapter" data-level="10.4.6" data-path="timeseries.html"><a href="timeseries.html#distributional-forecasts-and-prediction-intervals"><i class="fa fa-check"></i><b>10.4.6</b> Distributional forecasts and prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="timeseries.html"><a href="timeseries.html#residual-diagnostics-and-accuracy-evaluation"><i class="fa fa-check"></i><b>10.5</b> Residual Diagnostics and Accuracy Evaluation</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="timeseries.html"><a href="timeseries.html#residual-diagnostics"><i class="fa fa-check"></i><b>10.5.1</b> Residual diagnostics</a></li>
<li class="chapter" data-level="10.5.2" data-path="timeseries.html"><a href="timeseries.html#forecasting-accuracy"><i class="fa fa-check"></i><b>10.5.2</b> Forecasting accuracy</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="timeseries.html"><a href="timeseries.html#arima-models"><i class="fa fa-check"></i><b>10.6</b> ARIMA Models</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="timeseries.html"><a href="timeseries.html#differencing"><i class="fa fa-check"></i><b>10.6.1</b> Differencing</a></li>
<li class="chapter" data-level="10.6.2" data-path="timeseries.html"><a href="timeseries.html#arma-models"><i class="fa fa-check"></i><b>10.6.2</b> ARMA models</a></li>
<li class="chapter" data-level="10.6.3" data-path="timeseries.html"><a href="timeseries.html#simple-examples-of-arma-models"><i class="fa fa-check"></i><b>10.6.3</b> Simple examples of ARMA models</a></li>
<li class="chapter" data-level="10.6.4" data-path="timeseries.html"><a href="timeseries.html#arima-models-1"><i class="fa fa-check"></i><b>10.6.4</b> ARIMA models</a></li>
<li class="chapter" data-level="10.6.5" data-path="timeseries.html"><a href="timeseries.html#seasonal-arima-sarima-model"><i class="fa fa-check"></i><b>10.6.5</b> Seasonal ARIMA (SARIMA) model</a></li>
<li class="chapter" data-level="10.6.6" data-path="timeseries.html"><a href="timeseries.html#building-sarima-models"><i class="fa fa-check"></i><b>10.6.6</b> Building SARIMA Models</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="timeseries.html"><a href="timeseries.html#model-comparison"><i class="fa fa-check"></i><b>10.7</b> Model Comparison</a></li>
<li class="chapter" data-level="10.8" data-path="timeseries.html"><a href="timeseries.html#ensuring-forecasts-stay-within-limits"><i class="fa fa-check"></i><b>10.8</b> Ensuring Forecasts Stay Within Limits</a>
<ul>
<li class="chapter" data-level="10.8.1" data-path="timeseries.html"><a href="timeseries.html#positive-forecasts"><i class="fa fa-check"></i><b>10.8.1</b> Positive forecasts</a></li>
<li class="chapter" data-level="10.8.2" data-path="timeseries.html"><a href="timeseries.html#forecasts-constrained-to-an-interval"><i class="fa fa-check"></i><b>10.8.2</b> Forecasts constrained to an interval</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="timeseries.html"><a href="timeseries.html#prediction-and-prediction-intervals-for-aggregates"><i class="fa fa-check"></i><b>10.9</b> Prediction and Prediction Intervals for Aggregates</a></li>
<li class="chapter" data-level="10.10" data-path="timeseries.html"><a href="timeseries.html#exercises-5"><i class="fa fa-check"></i><b>10.10</b> Exercises</a></li>
<li class="chapter" data-level="10.11" data-path="timeseries.html"><a href="timeseries.html#references"><i class="fa fa-check"></i><b>10.11</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>11</b> Regression Modeling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="regression.html"><a href="regression.html#principles-of-regression-modeling"><i class="fa fa-check"></i><b>11.1</b> Principles of Regression Modeling</a></li>
<li class="chapter" data-level="11.2" data-path="regression.html"><a href="regression.html#area-level-data"><i class="fa fa-check"></i><b>11.2</b> Area-level Data</a></li>
<li class="chapter" data-level="11.3" data-path="regression.html"><a href="regression.html#variable-selection"><i class="fa fa-check"></i><b>11.3</b> Variable Selection</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="NN.html"><a href="NN.html"><i class="fa fa-check"></i><b>12</b> Neural Networks</a>
<ul>
<li class="chapter" data-level="12.1" data-path="NN.html"><a href="NN.html#a-single-neuron"><i class="fa fa-check"></i><b>12.1</b> A Single Neuron</a></li>
<li class="chapter" data-level="12.2" data-path="NN.html"><a href="NN.html#neural-network-structure"><i class="fa fa-check"></i><b>12.2</b> Neural Network Structure</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="NN.html"><a href="NN.html#forward-propagation"><i class="fa fa-check"></i><b>12.2.1</b> Forward propagation</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="NN.html"><a href="NN.html#overfitting"><i class="fa fa-check"></i><b>12.3</b> Overfitting</a></li>
<li class="chapter" data-level="12.4" data-path="NN.html"><a href="NN.html#neural-network-auto-regressive-nnar-models"><i class="fa fa-check"></i><b>12.4</b> Neural Network Auto-Regressive (NNAR) models</a></li>
<li class="chapter" data-level="12.5" data-path="NN.html"><a href="NN.html#covid-19-forecasting"><i class="fa fa-check"></i><b>12.5</b> COVID-19 Forecasting</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ensemble.html"><a href="ensemble.html"><i class="fa fa-check"></i><b>13</b> Hybrid Mdels</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ensemble.html"><a href="ensemble.html#ensembling-time-series-models"><i class="fa fa-check"></i><b>13.1</b> Ensembling Time Series Models</a></li>
<li class="chapter" data-level="13.2" data-path="ensemble.html"><a href="ensemble.html#model-diagnostics"><i class="fa fa-check"></i><b>13.2</b> Model Diagnostics</a></li>
<li class="chapter" data-level="13.3" data-path="ensemble.html"><a href="ensemble.html#weights-selection-using-cross-validation"><i class="fa fa-check"></i><b>13.3</b> Weights Selection Using Cross Validation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a></li>
<li class="chapter" data-level="14" data-path="appendix-a.html"><a href="appendix-a.html"><i class="fa fa-check"></i><b>14</b> Appendix A</a>
<ul>
<li class="chapter" data-level="14.1" data-path="appendix-a.html"><a href="appendix-a.html#r-introduction-and-preliminaries"><i class="fa fa-check"></i><b>14.1</b> R Introduction and Preliminaries</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="appendix-a.html"><a href="appendix-a.html#the-r-environment-and-language"><i class="fa fa-check"></i><b>14.1.1</b> The R Environment and Language</a></li>
<li class="chapter" data-level="14.1.2" data-path="appendix-a.html"><a href="appendix-a.html#r-and-statistics"><i class="fa fa-check"></i><b>14.1.2</b> R and Statistics</a></li>
<li class="chapter" data-level="14.1.3" data-path="appendix-a.html"><a href="appendix-a.html#obtaining-r-and-installation"><i class="fa fa-check"></i><b>14.1.3</b> Obtaining R and installation</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="appendix-a.html"><a href="appendix-a.html#starting-r"><i class="fa fa-check"></i><b>14.2</b> Starting R</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="appendix-a.html"><a href="appendix-a.html#description-of-three-panels-in-user-interface"><i class="fa fa-check"></i><b>14.2.1</b> Description of three panels in user interface</a></li>
<li class="chapter" data-level="14.2.2" data-path="appendix-a.html"><a href="appendix-a.html#r-help"><i class="fa fa-check"></i><b>14.2.2</b> R help</a></li>
<li class="chapter" data-level="14.2.3" data-path="appendix-a.html"><a href="appendix-a.html#some-mathematical-expressions"><i class="fa fa-check"></i><b>14.2.3</b> Some mathematical expressions</a></li>
<li class="chapter" data-level="14.2.4" data-path="appendix-a.html"><a href="appendix-a.html#r-packages"><i class="fa fa-check"></i><b>14.2.4</b> R Packages</a></li>
<li class="chapter" data-level="14.2.5" data-path="appendix-a.html"><a href="appendix-a.html#creating-a-project-and-setting-working-directory"><i class="fa fa-check"></i><b>14.2.5</b> Creating a project and setting working directory</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="appendix-a.html"><a href="appendix-a.html#exportimport-data"><i class="fa fa-check"></i><b>14.3</b> Export/Import Data</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="appendix-a.html"><a href="appendix-a.html#data-export"><i class="fa fa-check"></i><b>14.3.1</b> Data Export</a></li>
<li class="chapter" data-level="14.3.2" data-path="appendix-a.html"><a href="appendix-a.html#data-import"><i class="fa fa-check"></i><b>14.3.2</b> Data Import</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="appendix-b.html"><a href="appendix-b.html"><i class="fa fa-check"></i><b>15</b> Appendix B</a>
<ul>
<li class="chapter" data-level="15.1" data-path="appendix-b.html"><a href="appendix-b.html#epidemic-data"><i class="fa fa-check"></i><b>15.1</b> Epidemic Data</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="appendix-b.html"><a href="appendix-b.html#state-level"><i class="fa fa-check"></i><b>15.1.1</b> State level</a></li>
<li class="chapter" data-level="15.1.2" data-path="appendix-b.html"><a href="appendix-b.html#county-level"><i class="fa fa-check"></i><b>15.1.2</b> County level</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="appendix-b.html"><a href="appendix-b.html#other-factors"><i class="fa fa-check"></i><b>15.2</b> Other Factors</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="appendix-b.html"><a href="appendix-b.html#policy-data"><i class="fa fa-check"></i><b>15.2.1</b> Policy Data</a></li>
<li class="chapter" data-level="15.2.2" data-path="appendix-b.html"><a href="appendix-b.html#demographic-characteristics"><i class="fa fa-check"></i><b>15.2.2</b> Demographic Characteristics</a></li>
<li class="chapter" data-level="15.2.3" data-path="appendix-b.html"><a href="appendix-b.html#healthcare-infrastructure"><i class="fa fa-check"></i><b>15.2.3</b> Healthcare Infrastructure</a></li>
<li class="chapter" data-level="15.2.4" data-path="appendix-b.html"><a href="appendix-b.html#socioeconomic-status"><i class="fa fa-check"></i><b>15.2.4</b> Socioeconomic Status</a></li>
<li class="chapter" data-level="15.2.5" data-path="appendix-b.html"><a href="appendix-b.html#environmental-factor"><i class="fa fa-check"></i><b>15.2.5</b> Environmental Factor</a></li>
<li class="chapter" data-level="15.2.6" data-path="appendix-b.html"><a href="appendix-b.html#mobility"><i class="fa fa-check"></i><b>15.2.6</b> Mobility</a></li>
<li class="chapter" data-level="15.2.7" data-path="appendix-b.html"><a href="appendix-b.html#geographic-information"><i class="fa fa-check"></i><b>15.2.7</b> Geographic Information</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="appendix-b.html"><a href="appendix-b.html#data-sets"><i class="fa fa-check"></i><b>15.3</b> Data Sets</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="appendix-b.html"><a href="appendix-b.html#chapter-2"><i class="fa fa-check"></i><b>15.3.1</b> Chapter 2</a></li>
<li class="chapter" data-level="15.3.2" data-path="appendix-b.html"><a href="appendix-b.html#chapter-3"><i class="fa fa-check"></i><b>15.3.2</b> Chapter 3</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Learning of Infectious Disease Data Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="shiny" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> R Shiny</h1>
<p>In infectious disease data learning, interactive visualization makes complex data digestible and useful for users. Shiny offers the ability to develop a graphical user interface (GUI) that can be run locally or deployed online. It has the potential to simplify users’ access to interactive, web-based visualizations greatly. For example, it with multiple views or panels, enabling the users to review their data from different perspectives. Also, Shiny is beneficial to show and communicate updated findings to a broad audience.</p>
<p>In this chapter, we focus on linking Plotly graphs with shiny, an open-source R package that provides an elegant and powerful web framework for building web applications using R. Shiny helps you turn your analyses into interactive web applications without requiring HTML, CSS, or JavaScript knowledge.</p>
<p><strong>Installation</strong></p>
<p>Shiny is available on CRAN, so you can install it in the usual way from your R console:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="shiny.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;shiny&quot;</span>)</span></code></pre></div>
<div id="an-introduction-to-shiny" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> An Introduction to Shiny</h2>
<p>A shiny app has two main parts:</p>
<ol style="list-style-type: decimal">
<li><p>The user interface, <code>ui</code>, defines how inputs and output widgets are displayed on the page. The UI is customizable, and packages such as “shinydashboard” make it easy to leverage more sophisticated layout frameworks.</p></li>
<li><p>The server function, server, defines a mapping from input values to output widgets. More specifically, the shiny server is an R function between input values on the client and outputs generated on the webserver.</p></li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:shiny1"></span>
<img src="figures/shiny.png" alt="An illustration of Shiny Structure." width="50%" />
<p class="caption">
Figure 6.1: An illustration of Shiny Structure.
</p>
</div>
<p><strong>ui.R</strong></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="shiny.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb162-2"><a href="shiny.html#cb162-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-3"><a href="shiny.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for miles per gallon application</span></span>
<span id="cb162-4"><a href="shiny.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">pageWithSidebar</span>(</span>
<span id="cb162-5"><a href="shiny.html#cb162-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-6"><a href="shiny.html#cb162-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Application title</span></span>
<span id="cb162-7"><a href="shiny.html#cb162-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">headerPanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),</span>
<span id="cb162-8"><a href="shiny.html#cb162-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-9"><a href="shiny.html#cb162-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarPanel</span>(),</span>
<span id="cb162-10"><a href="shiny.html#cb162-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-11"><a href="shiny.html#cb162-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mainPanel</span>()</span>
<span id="cb162-12"><a href="shiny.html#cb162-12" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<p><strong>server.R</strong></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="shiny.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb163-2"><a href="shiny.html#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="shiny.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to plot variables against mpg</span></span>
<span id="cb163-4"><a href="shiny.html#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb163-5"><a href="shiny.html#cb163-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-6"><a href="shiny.html#cb163-6" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>Finally, to execute the shiny app, there are two ways.</p>
<ol style="list-style-type: decimal">
<li><p>You can run <code>runApp('appname')</code> in an R file, usually named as <code>apps.R</code>, that shares the same directory with a folder, which is under the name <code>'appname'</code>, and contains <code>UI.R</code> and <code>server.R</code> mentioned above.</p></li>
<li><p>You can define the server function as <code>server</code> and UI function as <code>ui</code> in the same R file, and run <code>shinyApp(ui, server)</code> as follows.</p></li>
</ol>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="shiny.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb164-2"><a href="shiny.html#cb164-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-3"><a href="shiny.html#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI </span></span>
<span id="cb164-4"><a href="shiny.html#cb164-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">shinyUI</span>(<span class="fu">pageWithSidebar</span>(</span>
<span id="cb164-5"><a href="shiny.html#cb164-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ... Program here</span></span>
<span id="cb164-6"><a href="shiny.html#cb164-6" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb164-7"><a href="shiny.html#cb164-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-8"><a href="shiny.html#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic</span></span>
<span id="cb164-9"><a href="shiny.html#cb164-9" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb164-10"><a href="shiny.html#cb164-10" aria-hidden="true" tabindex="-1"></a>     <span class="co"># ... Program here</span></span>
<span id="cb164-11"><a href="shiny.html#cb164-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb164-12"><a href="shiny.html#cb164-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-13"><a href="shiny.html#cb164-13" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui , <span class="at">server =</span> server)</span></code></pre></div>
<p>In practice, we prefer the first method over the second to manage multiple shiny apps.</p>
<div id="your-first-shiny-app" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Your first shiny app</h3>
<p>A Shiny application is simply a directory containing a user-interface definition, a server script, and any additional data, scripts, or other resources required to support the application.</p>
<p>To get started building the application, create a new empty directory wherever you’d like, then create empty <code>ui.R</code> and <code>server.R</code> files within in.</p>
<p>The user interface is defined in a source file named <strong>ui.R</strong>:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="shiny.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb165-2"><a href="shiny.html#cb165-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-3"><a href="shiny.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define UI for application that plots random distributions </span></span>
<span id="cb165-4"><a href="shiny.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">pageWithSidebar</span>(</span>
<span id="cb165-5"><a href="shiny.html#cb165-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-6"><a href="shiny.html#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Application title</span></span>
<span id="cb165-7"><a href="shiny.html#cb165-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">headerPanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),</span>
<span id="cb165-8"><a href="shiny.html#cb165-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-9"><a href="shiny.html#cb165-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sidebar with a slider input for number of observations</span></span>
<span id="cb165-10"><a href="shiny.html#cb165-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarPanel</span>(</span>
<span id="cb165-11"><a href="shiny.html#cb165-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sliderInput</span>(<span class="st">&quot;obs&quot;</span>, </span>
<span id="cb165-12"><a href="shiny.html#cb165-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Number of observations:&quot;</span>, </span>
<span id="cb165-13"><a href="shiny.html#cb165-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">min =</span> <span class="dv">1</span>,</span>
<span id="cb165-14"><a href="shiny.html#cb165-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">max =</span> <span class="dv">1000</span>, </span>
<span id="cb165-15"><a href="shiny.html#cb165-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">value =</span> <span class="dv">500</span>)</span>
<span id="cb165-16"><a href="shiny.html#cb165-16" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb165-17"><a href="shiny.html#cb165-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-18"><a href="shiny.html#cb165-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show a plot of the generated distribution</span></span>
<span id="cb165-19"><a href="shiny.html#cb165-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mainPanel</span>(</span>
<span id="cb165-20"><a href="shiny.html#cb165-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)</span>
<span id="cb165-21"><a href="shiny.html#cb165-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb165-22"><a href="shiny.html#cb165-22" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<p>The server-side of the application is shown below. It’s very simple – a random distribution with the requested number of observations is generated, and then plotted as a histogram. However, you may also notice that the function which returns the plot is wrapped in a call to <code>renderPlot</code>. See the source file named <strong>server.R</strong> below.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="shiny.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb166-2"><a href="shiny.html#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="shiny.html#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to generate and plot a random </span></span>
<span id="cb166-4"><a href="shiny.html#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="co"># distribution</span></span>
<span id="cb166-5"><a href="shiny.html#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb166-6"><a href="shiny.html#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="shiny.html#cb166-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Expression that generates a plot of the distribution. </span></span>
<span id="cb166-8"><a href="shiny.html#cb166-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># The expression is wrapped in a call to renderPlot</span></span>
<span id="cb166-9"><a href="shiny.html#cb166-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># to indicate that:</span></span>
<span id="cb166-10"><a href="shiny.html#cb166-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb166-11"><a href="shiny.html#cb166-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  1) It is &quot;reactive&quot; and therefore should be automatically </span></span>
<span id="cb166-12"><a href="shiny.html#cb166-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     re-executed when inputs change</span></span>
<span id="cb166-13"><a href="shiny.html#cb166-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  2) Its output type is a plot </span></span>
<span id="cb166-14"><a href="shiny.html#cb166-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb166-15"><a href="shiny.html#cb166-15" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>distPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb166-16"><a href="shiny.html#cb166-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-17"><a href="shiny.html#cb166-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># generate an rnorm distribution and plot it</span></span>
<span id="cb166-18"><a href="shiny.html#cb166-18" aria-hidden="true" tabindex="-1"></a>    dist <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(input<span class="sc">$</span>obs)</span>
<span id="cb166-19"><a href="shiny.html#cb166-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hist</span>(dist)</span>
<span id="cb166-20"><a href="shiny.html#cb166-20" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb166-21"><a href="shiny.html#cb166-21" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>If everything is working correctly you’ll see the application appear in your browser looking something like this:</p>
<div class="figure">
<img src="figures/hist.png" alt="" />
<p class="caption">The Hello Shiny example.</p>
</div>
</div>
<div id="create-a-new-shiny-app-in-rstudio" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Create a new shiny app in RStudio</h3>
<p>In RStudio, you can create a new directory and an <code>app.R</code> file containing a basic app in one step by clicking File -&gt; New File -&gt; Shiny Web App, then providing Application Name and select Application Type.</p>
<div class="figure">
<img src="figures/ShinyApp.png" alt="" />
<p class="caption">The RStudio New Shiny Web App Window.</p>
</div>
</div>
<div id="share-your-app" class="section level3" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Share your app</h3>
<p>RStudio offers three ways to host your Shiny app as a web page:</p>
<ol style="list-style-type: decimal">
<li><p>Create a free or professional account at <a href="http://shinyapps.io" class="uri">http://shinyapps.io</a>, a cloud-based service from RStudio, to host your shiny apps.</p></li>
<li><p>Click the Publish icon in the RStudio IDE (&gt;=0.99) or run:</p></li>
</ol>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="shiny.html#cb167-1" aria-hidden="true" tabindex="-1"></a>rsconnect<span class="sc">::</span><span class="fu">deployApp</span>(<span class="st">&quot;&lt;path to directory&gt;&quot;</span>)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Shiny Server is a companion program to Shiny that builds a web server designed to host Shiny apps. It’s free, open-source, and available from GitHub.</li>
</ol>
</div>
</div>
<div id="useful-input-widgets" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Useful Input Widgets</h2>
<p>Shiny also comes pre-packaged with a handful of other useful input widgets, web elements that your users can interact with. Widgets provide a way for your users to send messages to the Shiny app. Shiny widgets collect a value from your user. When a user changes the widget, the value will change as well.</p>
<p>Although many shiny apps use them straight “out-of-the-box,” input widgets can easily be stylized with CSS and/or SASS, and even custom input widgets can be integrated. From <a href="https://shiny.rstudio.com/" class="uri">https://shiny.rstudio.com/</a>, we can explore and select the appropriate input widgets for your interactive visualization.</p>
<div class="figure">
<img src="figures/Input.png" alt="" />
<p class="caption">The Basic widgets.</p>
</div>
<ul>
<li><code>selectInput()</code> or <code>selectizeInput()</code> for dropdown menus.</li>
<li><code>numericInput()</code> for a single number.</li>
<li><code>sliderInput()</code> for a numeric range.</li>
<li><code>textInput()</code> for a character string.</li>
<li><code>dateInput()</code> for a single date.</li>
<li><code>dateRangeInput()</code> for a range of dates.</li>
<li><code>fileInput()</code> for uploading files.</li>
<li><code>checkboxInput()</code>, or <code>checkboxGroupInput()</code> or <code>radioButtons()</code> for choosing a list of options.</li>
</ul>
<p>Going forward our focus is to link multiple graphs in shiny through direct manipulation, so we focus less on using these input widgets, and more on using plotly and static R graphics as inputs to other output widgets.</p>
</div>
<div id="displaying-reactive-output" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Displaying Reactive Output</h2>
<p>You can create reactive output with a two step process.</p>
<ol style="list-style-type: decimal">
<li><p>Add an R object to your user interface.</p></li>
<li><p>Tell Shiny how to build the object in the server function. The object will be reactive if the code that builds it calls a widget value.</p></li>
</ol>
<p><strong>Step 1: Add an R object to the UI</strong></p>
<p>Shiny provides a family of functions that turn R objects into output for your user interface. Each function creates a specific type of output. Output function Creates</p>
<ul>
<li><code>dataTableOutput</code>: DataTable</li>
<li><code>htmlOutput</code>: raw HTML</li>
<li><code>imageOutput</code>: image</li>
<li><code>plotOutput</code>: plot</li>
<li><code>tableOutput</code>: table</li>
<li><code>textOutput</code>: text</li>
<li><code>uiOutput</code>: raw HTML</li>
<li><code>verbatimTextOutput</code>: text</li>
</ul>
<p>You can add output to the user interface in the same way that you added HTML elements and widgets. Place the output function inside <code>sidebarPanel</code> or <code>mainPanel</code> in the <code>ui</code>.</p>
<p><strong>Step 2: Provide R code to build the object.</strong></p>
<p>Placing a function in <code>ui</code> tells Shiny where to display your object. Next, you need to tell Shiny how to build the object.</p>
<p>We do this by providing the R code that builds the object in the server function.</p>
<p>The server function plays a special role in the Shiny process; it builds a list-like object named output that contains all of the code needed to update the R objects in your app. Each R object needs to have its own entry in the list.</p>
<p>You can create an entry by defining a new element for output within the server function, like below. The element name should match the name of the reactive element that you created in the <code>ui</code>.</p>
<p>You do not need to explicitly state in the server function to return output in its last line of code. R will automatically update output through reference class semantics.</p>
<p>Each entry to output should contain the output of one of Shiny’s <code>render*</code> functions. These functions capture an R expression and do some light pre-processing on the expression. You use the <code>render*</code> function that corresponds to the type of reactive object you are making. Specifically, the render function creates:</p>
<ul>
<li><code>renderDataTable</code>: DataTable</li>
<li><code>renderImage</code>: images (saved as a link to a source file)</li>
<li><code>renderPlot</code>: plots</li>
<li><code>renderPrint</code>: any printed output</li>
<li><code>renderTable</code>: data frame, matrix, other table like structures</li>
<li><code>renderText</code>: character strings</li>
<li><code>renderUI</code>: a Shiny tag object or HTML</li>
</ul>
<p>Each <code>render*</code> function takes a single argument: an R expression surrounded by <code>{}</code>, which can be one simple line of text, or it can involve many lines of code as if it were a complicated function call.</p>
<p>You can consider this R expression a set of instructions that you give Shiny to store for later. Shiny will run the instructions when you first launch your app, and then Shiny will re-run the instructions every time it needs to update your object.</p>
<p><a href="https://shiny.rstudio.com/images/shiny-cheatsheet.pdf">The Shiny Cheatsheet</a> provides nice summary of the <code>render*()</code> and <code>*Output()</code> functions.</p>
<div class="figure">
<img src="figures/Output.png" alt="" />
<p class="caption">The Basic widgets.</p>
</div>
</div>
<div id="rendering-plotly-inside-shiny" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Rendering Plotly Inside Shiny</h2>
<p>The <code>renderPlotly()</code> function renders anything that the plotly_build() function understands, including <code>plot_ly()</code>, <code>ggplotly()</code>, and <em>ggplot2</em> objects. It also renders <code>NULL</code> as an empty HTML div, which is handy for certain cases where it doesn’t make sense to render a graph.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="shiny.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb168-2"><a href="shiny.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wesanderson)</span>
<span id="cb168-3"><a href="shiny.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb168-4"><a href="shiny.html#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb168-5"><a href="shiny.html#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(slid) </span>
<span id="cb168-6"><a href="shiny.html#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="co">#library(devtools)</span></span>
<span id="cb168-7"><a href="shiny.html#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="co">#install_github(&#39;https://github.com/covid19-dashboard-us/slid&#39;)</span></span></code></pre></div>
<p><strong>Example 1. Top 10 states with the highest daily new infected count</strong></p>
<p><strong>ui.R</strong></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="shiny.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">fluidPage</span>(</span>
<span id="cb169-2"><a href="shiny.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sliderInput</span>(<span class="st">&quot;date.update&quot;</span>,</span>
<span id="cb169-3"><a href="shiny.html#cb169-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="fu">h5</span>(<span class="st">&quot;Select date&quot;</span>),</span>
<span id="cb169-4"><a href="shiny.html#cb169-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-11-12&quot;</span>),</span>
<span id="cb169-5"><a href="shiny.html#cb169-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-12-11&quot;</span>),</span>
<span id="cb169-6"><a href="shiny.html#cb169-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2020-12-11&quot;</span>),</span>
<span id="cb169-7"><a href="shiny.html#cb169-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">timeFormat =</span> <span class="st">&quot;%d %b&quot;</span>,</span>
<span id="cb169-8"><a href="shiny.html#cb169-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">animate =</span> <span class="fu">animationOptions</span>(<span class="at">interval =</span> <span class="dv">2000</span>, <span class="at">loop =</span> <span class="cn">FALSE</span>)</span>
<span id="cb169-9"><a href="shiny.html#cb169-9" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb169-10"><a href="shiny.html#cb169-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb169-11"><a href="shiny.html#cb169-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show a plot of the generated distribution</span></span>
<span id="cb169-12"><a href="shiny.html#cb169-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mainPanel</span>(</span>
<span id="cb169-13"><a href="shiny.html#cb169-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">plotlyOutput</span>(<span class="st">&quot;state_daily_bc&quot;</span>, <span class="at">height =</span> <span class="st">&quot;100%&quot;</span>, <span class="at">width =</span> <span class="st">&quot;150%&quot;</span>)</span>
<span id="cb169-14"><a href="shiny.html#cb169-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb169-15"><a href="shiny.html#cb169-15" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<p><strong>server.R</strong></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="shiny.html#cb170-1" aria-hidden="true" tabindex="-1"></a>state.daily.bc <span class="ot">&lt;-</span> <span class="cf">function</span>(date.update){</span>
<span id="cb170-2"><a href="shiny.html#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># load daily new case data for each state</span></span>
<span id="cb170-3"><a href="shiny.html#cb170-3" aria-hidden="true" tabindex="-1"></a>  dat.sd <span class="ot">=</span> slid<span class="sc">::</span>dat.sd</span>
<span id="cb170-4"><a href="shiny.html#cb170-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select the top 10 states with highest daily new</span></span>
<span id="cb170-5"><a href="shiny.html#cb170-5" aria-hidden="true" tabindex="-1"></a>  df.sd <span class="ot">&lt;-</span> dat.sd[ind.sd[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>],]</span>
<span id="cb170-6"><a href="shiny.html#cb170-6" aria-hidden="true" tabindex="-1"></a>  df.sd <span class="ot">&lt;-</span> df.sd <span class="sc">%&gt;%</span> </span>
<span id="cb170-7"><a href="shiny.html#cb170-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(State, <span class="fu">format</span>(date.update, <span class="st">&#39;X%Y.%m.%d&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb170-8"><a href="shiny.html#cb170-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(Date <span class="ot">&lt;-</span> <span class="fu">format</span>(date.update, <span class="st">&#39;%m/%d&#39;</span>))</span>
<span id="cb170-9"><a href="shiny.html#cb170-9" aria-hidden="true" tabindex="-1"></a>  df.sd<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">as.character</span>(df.sd<span class="sc">$</span>State)</span>
<span id="cb170-10"><a href="shiny.html#cb170-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(df.sd) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;State&#39;</span>, <span class="st">&#39;DailyCases&#39;</span>, <span class="st">&#39;Date&#39;</span>)</span>
<span id="cb170-11"><a href="shiny.html#cb170-11" aria-hidden="true" tabindex="-1"></a>  plot.title <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;New Cases on &quot;</span>, <span class="fu">as.character</span>(date.update))</span>
<span id="cb170-12"><a href="shiny.html#cb170-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb170-13"><a href="shiny.html#cb170-13" aria-hidden="true" tabindex="-1"></a>  bc.sd <span class="ot">&lt;-</span></span>
<span id="cb170-14"><a href="shiny.html#cb170-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(df.sd, <span class="fu">aes</span>(State, DailyCases)) <span class="sc">+</span> </span>
<span id="cb170-15"><a href="shiny.html#cb170-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> plot.title) <span class="sc">+</span></span>
<span id="cb170-16"><a href="shiny.html#cb170-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb170-17"><a href="shiny.html#cb170-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&#39;&#39;</span>) <span class="sc">+</span></span>
<span id="cb170-18"><a href="shiny.html#cb170-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&#39;identity&#39;</span>, <span class="at">fill =</span> <span class="st">&quot;#C93312&quot;</span>) </span>
<span id="cb170-19"><a href="shiny.html#cb170-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(bc.sd) </span>
<span id="cb170-20"><a href="shiny.html#cb170-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb170-21"><a href="shiny.html#cb170-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-22"><a href="shiny.html#cb170-22" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb170-23"><a href="shiny.html#cb170-23" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>state_daily_bc <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb170-24"><a href="shiny.html#cb170-24" aria-hidden="true" tabindex="-1"></a>    ts <span class="ot">&lt;-</span> <span class="fu">state.daily.bc</span>(input<span class="sc">$</span>date.update)</span>
<span id="cb170-25"><a href="shiny.html#cb170-25" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb170-26"><a href="shiny.html#cb170-26" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>If everything is working correctly you’ll see the application appear in your browser looking something like this:</p>
<div class="figure">
<img src="figures/statenewbar.png" alt="" />
<p class="caption">The top ten states with the highest daily new infected count.</p>
</div>
<p><strong>Example 2.</strong></p>
<p><strong>ui.R</strong></p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="shiny.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">fluidPage</span>(</span>
<span id="cb171-2"><a href="shiny.html#cb171-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">div</span>(<span class="at">class =</span> <span class="st">&quot;outer&quot;</span>,</span>
<span id="cb171-3"><a href="shiny.html#cb171-3" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(<span class="fu">includeCSS</span>(<span class="st">&quot;styles.css&quot;</span>)),</span>
<span id="cb171-4"><a href="shiny.html#cb171-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plotlyOutput</span>(<span class="st">&quot;us_case_ts&quot;</span>, <span class="at">height =</span> <span class="st">&quot;100%&quot;</span>, <span class="at">width =</span> <span class="st">&quot;100%&quot;</span>),</span>
<span id="cb171-5"><a href="shiny.html#cb171-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">absolutePanel</span>(<span class="at">id =</span> <span class="st">&quot;control&quot;</span>, <span class="at">class =</span> <span class="st">&quot;panel panel-default&quot;</span>,</span>
<span id="cb171-6"><a href="shiny.html#cb171-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">top =</span> <span class="dv">60</span>, <span class="at">left =</span> <span class="dv">70</span>, <span class="at">width =</span> <span class="dv">255</span>, <span class="at">fixed=</span><span class="cn">TRUE</span>,</span>
<span id="cb171-7"><a href="shiny.html#cb171-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">draggable =</span> <span class="cn">TRUE</span>, <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>, </span>
<span id="cb171-8"><a href="shiny.html#cb171-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">style =</span> <span class="st">&quot;opacity: 0.8&quot;</span>,</span>
<span id="cb171-9"><a href="shiny.html#cb171-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">selectInput</span>(<span class="st">&quot;plot_type&quot;</span>,</span>
<span id="cb171-10"><a href="shiny.html#cb171-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="fu">h5</span>(<span class="st">&quot;Select type&quot;</span>),</span>
<span id="cb171-11"><a href="shiny.html#cb171-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;Original Counts&quot;</span> <span class="ot">=</span> <span class="st">&quot;counts&quot;</span>, </span>
<span id="cb171-12"><a href="shiny.html#cb171-12" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;Log Counts&quot;</span> <span class="ot">=</span> <span class="st">&quot;logcounts&quot;</span>)</span>
<span id="cb171-13"><a href="shiny.html#cb171-13" aria-hidden="true" tabindex="-1"></a>    )<span class="co"># end of selectInput1</span></span>
<span id="cb171-14"><a href="shiny.html#cb171-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb171-15"><a href="shiny.html#cb171-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># end of div</span></span>
<span id="cb171-16"><a href="shiny.html#cb171-16" aria-hidden="true" tabindex="-1"></a>) <span class="co"># end of tab</span></span>
<span id="cb171-17"><a href="shiny.html#cb171-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>server.R</strong></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="shiny.html#cb172-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#045a8d&quot;</span>, <span class="st">&quot;#cc4c02&quot;</span>)</span>
<span id="cb172-2"><a href="shiny.html#cb172-2" aria-hidden="true" tabindex="-1"></a>us.case.ts <span class="ot">&lt;-</span> <span class="cf">function</span>(date.update, plot.type) {</span>
<span id="cb172-3"><a href="shiny.html#cb172-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cum infected cases in Iowa: Observation and Prediction</span></span>
<span id="cb172-4"><a href="shiny.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  dfplot <span class="ot">=</span> slid<span class="sc">::</span>dfplot</span>
<span id="cb172-5"><a href="shiny.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb172-6"><a href="shiny.html#cb172-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (plot.type <span class="sc">==</span> <span class="st">&#39;counts&#39;</span>){</span>
<span id="cb172-7"><a href="shiny.html#cb172-7" aria-hidden="true" tabindex="-1"></a>   ts <span class="ot">&lt;-</span></span>
<span id="cb172-8"><a href="shiny.html#cb172-8" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ggplot</span>(dfplot, <span class="fu">aes</span>(Date, DailyCases, <span class="at">colour =</span> Group)) <span class="sc">+</span></span>
<span id="cb172-9"><a href="shiny.html#cb172-9" aria-hidden="true" tabindex="-1"></a>     <span class="do">## Plot observed</span></span>
<span id="cb172-10"><a href="shiny.html#cb172-10" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">&#39;darkgray&#39;</span>)  <span class="sc">+</span></span>
<span id="cb172-11"><a href="shiny.html#cb172-11" aria-hidden="true" tabindex="-1"></a>     <span class="fu">geom_point</span>()  <span class="sc">+</span></span>
<span id="cb172-12"><a href="shiny.html#cb172-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Observation&quot;</span> <span class="ot">=</span> cols[<span class="dv">1</span>], </span>
<span id="cb172-13"><a href="shiny.html#cb172-13" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">&quot;Prediction&quot;</span> <span class="ot">=</span> cols[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb172-14"><a href="shiny.html#cb172-14" aria-hidden="true" tabindex="-1"></a>     <span class="do">## Change labs</span></span>
<span id="cb172-15"><a href="shiny.html#cb172-15" aria-hidden="true" tabindex="-1"></a>     <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Daily new infected cases and prediction&#39;</span>)  <span class="sc">+</span>  </span>
<span id="cb172-16"><a href="shiny.html#cb172-16" aria-hidden="true" tabindex="-1"></a>     <span class="fu">xlab</span>(<span class="st">&#39;Date&#39;</span>) <span class="sc">+</span></span>
<span id="cb172-17"><a href="shiny.html#cb172-17" aria-hidden="true" tabindex="-1"></a>     <span class="fu">ylab</span>(<span class="st">&#39;Daily new cases&#39;</span>)</span>
<span id="cb172-18"><a href="shiny.html#cb172-18" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb172-19"><a href="shiny.html#cb172-19" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (plot.type <span class="sc">==</span> <span class="st">&#39;logcounts&#39;</span>){</span>
<span id="cb172-20"><a href="shiny.html#cb172-20" aria-hidden="true" tabindex="-1"></a>    ts <span class="ot">&lt;-</span></span>
<span id="cb172-21"><a href="shiny.html#cb172-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(dfplot, <span class="fu">aes</span>(Date, logDailyCases, <span class="at">colour =</span> Group) ) <span class="sc">+</span></span>
<span id="cb172-22"><a href="shiny.html#cb172-22" aria-hidden="true" tabindex="-1"></a>      <span class="do">## Plot observed</span></span>
<span id="cb172-23"><a href="shiny.html#cb172-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">&#39;darkgray&#39;</span>)  <span class="sc">+</span></span>
<span id="cb172-24"><a href="shiny.html#cb172-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_point</span>()  <span class="sc">+</span></span>
<span id="cb172-25"><a href="shiny.html#cb172-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Observation&quot;</span> <span class="ot">=</span> cols[<span class="dv">1</span>], </span>
<span id="cb172-26"><a href="shiny.html#cb172-26" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&quot;Prediction&quot;</span> <span class="ot">=</span> cols[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb172-27"><a href="shiny.html#cb172-27" aria-hidden="true" tabindex="-1"></a>      <span class="do">## Change labs</span></span>
<span id="cb172-28"><a href="shiny.html#cb172-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Logarithm of daily new infected count </span></span>
<span id="cb172-29"><a href="shiny.html#cb172-29" aria-hidden="true" tabindex="-1"></a><span class="st">           and prediction&#39;</span>) <span class="sc">+</span>  </span>
<span id="cb172-30"><a href="shiny.html#cb172-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xlab</span>(<span class="st">&#39;Date&#39;</span>) <span class="sc">+</span></span>
<span id="cb172-31"><a href="shiny.html#cb172-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ylab</span>(<span class="st">&#39;Log (Daily new cases)&#39;</span>)</span>
<span id="cb172-32"><a href="shiny.html#cb172-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb172-33"><a href="shiny.html#cb172-33" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb172-34"><a href="shiny.html#cb172-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ts)    </span>
<span id="cb172-35"><a href="shiny.html#cb172-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb172-36"><a href="shiny.html#cb172-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-37"><a href="shiny.html#cb172-37" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb172-38"><a href="shiny.html#cb172-38" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>us_case_ts <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb172-39"><a href="shiny.html#cb172-39" aria-hidden="true" tabindex="-1"></a>    ts <span class="ot">&lt;-</span> <span class="fu">us.case.ts</span>(<span class="at">date.update =</span> date.update, </span>
<span id="cb172-40"><a href="shiny.html#cb172-40" aria-hidden="true" tabindex="-1"></a>                     <span class="at">plot.type =</span> input<span class="sc">$</span>plot_type)</span>
<span id="cb172-41"><a href="shiny.html#cb172-41" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb172-42"><a href="shiny.html#cb172-42" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>If everything is working correctly you’ll see the application appear in your browser looking something like this:</p>
<div class="figure">
<img src="figures/dailynew_IA.png" alt="" />
<p class="caption">The time series plot of the daily new infected cases of Iowa.</p>
</div>
<p>Remark: There are currently four different modes for mouse click+drag behavior (i.e., <code>dragmode</code>) in plotly.js: zoom, pan, rectangular selection, and lasso selection.</p>
<p><strong>Example 3.</strong></p>
<p><strong>ui.R</strong></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="shiny.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyUI</span>(<span class="fu">fluidPage</span>(</span>
<span id="cb173-2"><a href="shiny.html#cb173-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">div</span>(<span class="at">class=</span><span class="st">&quot;outer&quot;</span>,</span>
<span id="cb173-3"><a href="shiny.html#cb173-3" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">head</span>(<span class="fu">includeCSS</span>(<span class="st">&quot;styles.css&quot;</span>)),</span>
<span id="cb173-4"><a href="shiny.html#cb173-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plotlyOutput</span>(<span class="st">&quot;county_risk_ts&quot;</span>, <span class="at">height=</span><span class="st">&quot;100%&quot;</span>, <span class="at">width=</span><span class="st">&quot;100%&quot;</span>),</span>
<span id="cb173-5"><a href="shiny.html#cb173-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">absolutePanel</span>(<span class="at">id =</span> <span class="st">&quot;control&quot;</span>, <span class="at">class =</span> <span class="st">&quot;panel panel-default&quot;</span>,</span>
<span id="cb173-6"><a href="shiny.html#cb173-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">top =</span> <span class="dv">60</span>, <span class="at">left =</span> <span class="dv">70</span>, <span class="at">width =</span> <span class="dv">255</span>, <span class="at">fixed=</span><span class="cn">TRUE</span>,</span>
<span id="cb173-7"><a href="shiny.html#cb173-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">draggable =</span> <span class="cn">TRUE</span>, <span class="at">height =</span> <span class="st">&quot;auto&quot;</span>, <span class="at">style =</span> <span class="st">&quot;opacity: 0.8&quot;</span>,</span>
<span id="cb173-8"><a href="shiny.html#cb173-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span>(<span class="st">&quot;plot_type&quot;</span>,</span>
<span id="cb173-9"><a href="shiny.html#cb173-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">label =</span> <span class="fu">h5</span>(<span class="st">&quot;Select type&quot;</span>),</span>
<span id="cb173-10"><a href="shiny.html#cb173-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;WLR&quot;</span> <span class="ot">=</span> <span class="st">&quot;wlr&quot;</span>, <span class="st">&quot;IR&quot;</span> <span class="ot">=</span> <span class="st">&quot;localrisk&quot;</span>, </span>
<span id="cb173-11"><a href="shiny.html#cb173-11" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;SIR&quot;</span> <span class="ot">=</span> <span class="st">&quot;smr&quot;</span>)</span>
<span id="cb173-12"><a href="shiny.html#cb173-12" aria-hidden="true" tabindex="-1"></a>      ) <span class="co"># end of selectInput</span></span>
<span id="cb173-13"><a href="shiny.html#cb173-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="co"># end of absolutePanel</span></span>
<span id="cb173-14"><a href="shiny.html#cb173-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="co"># end of div</span></span>
<span id="cb173-15"><a href="shiny.html#cb173-15" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<p>** server.R **</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="shiny.html#cb174-1" aria-hidden="true" tabindex="-1"></a>date.update <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&#39;2020-12-12&#39;</span>)</span>
<span id="cb174-2"><a href="shiny.html#cb174-2" aria-hidden="true" tabindex="-1"></a>mycol <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#5B1A18&quot;</span>, <span class="st">&quot;#F21A00&quot;</span>, <span class="st">&quot;#D67236&quot;</span>, <span class="st">&quot;#F1BB7B&quot;</span>, </span>
<span id="cb174-3"><a href="shiny.html#cb174-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;#D8B70A&quot;</span>, <span class="st">&quot;#A2A475&quot;</span>, <span class="st">&quot;#81A88D&quot;</span>, <span class="st">&quot;#78B7C5&quot;</span>, </span>
<span id="cb174-4"><a href="shiny.html#cb174-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;#3B9AB2&quot;</span>, <span class="st">&quot;#7294D4&quot;</span>, <span class="st">&quot;#C6CDF7&quot;</span>, <span class="st">&quot;#E6A0C4&quot;</span>)</span>
<span id="cb174-5"><a href="shiny.html#cb174-5" aria-hidden="true" tabindex="-1"></a>ts.plotly <span class="ot">=</span> <span class="cf">function</span>(df, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>, </span>
<span id="cb174-6"><a href="shiny.html#cb174-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> group, mycol, <span class="at">showlegend =</span> <span class="cn">TRUE</span>, <span class="at">visible =</span> T, </span>
<span id="cb174-7"><a href="shiny.html#cb174-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> xaxis, <span class="at">yaxis =</span> yaxis, <span class="at">legend =</span> legend) {</span>
<span id="cb174-8"><a href="shiny.html#cb174-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb174-9"><a href="shiny.html#cb174-9" aria-hidden="true" tabindex="-1"></a>    ts <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(df) <span class="sc">%&gt;%</span></span>
<span id="cb174-10"><a href="shiny.html#cb174-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">add_trace</span>(<span class="at">x =</span> <span class="sc">~</span>x, <span class="at">y =</span> <span class="sc">~</span>y, <span class="at">type =</span> type, <span class="at">mode =</span> mode, </span>
<span id="cb174-11"><a href="shiny.html#cb174-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="sc">~</span>group, <span class="at">colors =</span> mycol, </span>
<span id="cb174-12"><a href="shiny.html#cb174-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">showlegend =</span> showlegend, </span>
<span id="cb174-13"><a href="shiny.html#cb174-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">visible =</span> visible) <span class="sc">%&gt;%</span></span>
<span id="cb174-14"><a href="shiny.html#cb174-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">layout</span>(<span class="at">xaxis =</span> xaxis, <span class="at">yaxis =</span> yaxis, </span>
<span id="cb174-15"><a href="shiny.html#cb174-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">legend =</span> legend)</span>
<span id="cb174-16"><a href="shiny.html#cb174-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ts)</span>
<span id="cb174-17"><a href="shiny.html#cb174-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb174-18"><a href="shiny.html#cb174-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-19"><a href="shiny.html#cb174-19" aria-hidden="true" tabindex="-1"></a>county.risk.ts <span class="ot">=</span> <span class="cf">function</span>(date.update, <span class="at">type =</span> <span class="st">&#39;localrisk&#39;</span>){</span>
<span id="cb174-20"><a href="shiny.html#cb174-20" aria-hidden="true" tabindex="-1"></a>  date.all <span class="ot">=</span> date.update <span class="sc">-</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>)</span>
<span id="cb174-21"><a href="shiny.html#cb174-21" aria-hidden="true" tabindex="-1"></a>  date.lag <span class="ot">=</span> date.all <span class="sc">-</span> <span class="dv">7</span></span>
<span id="cb174-22"><a href="shiny.html#cb174-22" aria-hidden="true" tabindex="-1"></a>  County.pop0 <span class="ot">&lt;-</span> slid<span class="sc">::</span>pop.county</span>
<span id="cb174-23"><a href="shiny.html#cb174-23" aria-hidden="true" tabindex="-1"></a>  County.pop <span class="ot">&lt;-</span> County.pop0 <span class="sc">%&gt;%</span> </span>
<span id="cb174-24"><a href="shiny.html#cb174-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>((<span class="sc">!</span>(State <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Alaska&quot;</span>,<span class="st">&quot;Hawaii&quot;</span>))))</span>
<span id="cb174-25"><a href="shiny.html#cb174-25" aria-hidden="true" tabindex="-1"></a>  County.pop <span class="ot">&lt;-</span> County.pop <span class="sc">%&gt;%</span> </span>
<span id="cb174-26"><a href="shiny.html#cb174-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>((<span class="sc">!</span>(ID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">36005</span>, <span class="dv">36047</span>, <span class="dv">36081</span>, <span class="dv">36085</span>))))</span>
<span id="cb174-27"><a href="shiny.html#cb174-27" aria-hidden="true" tabindex="-1"></a>  County.pop<span class="sc">$</span>ID[County.pop<span class="sc">$</span>ID <span class="sc">==</span> <span class="dv">46102</span>] <span class="ot">=</span> <span class="dv">46113</span></span>
<span id="cb174-28"><a href="shiny.html#cb174-28" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> slid<span class="sc">::</span>I.county</span>
<span id="cb174-29"><a href="shiny.html#cb174-29" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb174-30"><a href="shiny.html#cb174-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>((<span class="sc">!</span>(State <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Alaska&quot;</span>, <span class="st">&quot;Hawaii&quot;</span>))))</span>
<span id="cb174-31"><a href="shiny.html#cb174-31" aria-hidden="true" tabindex="-1"></a>  var.names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>, <span class="fu">as.character</span>(date.all), <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb174-32"><a href="shiny.html#cb174-32" aria-hidden="true" tabindex="-1"></a>  var.names <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">-&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, var.names)</span>
<span id="cb174-33"><a href="shiny.html#cb174-33" aria-hidden="true" tabindex="-1"></a>  var.lag <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>, <span class="fu">as.character</span>(date.lag), <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb174-34"><a href="shiny.html#cb174-34" aria-hidden="true" tabindex="-1"></a>  var.lag <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">-&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>, var.lag)</span>
<span id="cb174-35"><a href="shiny.html#cb174-35" aria-hidden="true" tabindex="-1"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>((dat[, var.names] <span class="sc">-</span> dat[, var.lag])<span class="sc">/</span><span class="dv">7</span>)</span>
<span id="cb174-36"><a href="shiny.html#cb174-36" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> dat[, <span class="fu">c</span>(<span class="st">&quot;ID&quot;</span>, <span class="st">&quot;County&quot;</span>, <span class="st">&quot;State&quot;</span>, var.names)]</span>
<span id="cb174-37"><a href="shiny.html#cb174-37" aria-hidden="true" tabindex="-1"></a>  smr.c <span class="ot">&lt;-</span> <span class="fu">sum</span>(County.pop<span class="sc">$</span>population)<span class="sc">/</span><span class="fu">as.matrix</span>(<span class="fu">colSums</span>(dat[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]))</span>
<span id="cb174-38"><a href="shiny.html#cb174-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-39"><a href="shiny.html#cb174-39" aria-hidden="true" tabindex="-1"></a>  I0 <span class="ot">&lt;-</span> LogI0 <span class="ot">&lt;-</span> LocRisk0 <span class="ot">&lt;-</span> SMR0 <span class="ot">&lt;-</span> dat</span>
<span id="cb174-40"><a href="shiny.html#cb174-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># I0[,-(1:3)] &lt;- as.matrix(dat[,-(1:3)])</span></span>
<span id="cb174-41"><a href="shiny.html#cb174-41" aria-hidden="true" tabindex="-1"></a>  LogI0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)] <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(<span class="fu">log</span>(dat[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb174-42"><a href="shiny.html#cb174-42" aria-hidden="true" tabindex="-1"></a>  LocRisk0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)] <span class="ot">&lt;-</span> <span class="fu">sweep</span>(<span class="fu">as.matrix</span>(dat[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]), <span class="dv">1</span>, </span>
<span id="cb174-43"><a href="shiny.html#cb174-43" aria-hidden="true" tabindex="-1"></a>          County.pop<span class="sc">$</span>population[<span class="fu">match</span>(dat<span class="sc">$</span>ID, County.pop<span class="sc">$</span>ID)], </span>
<span id="cb174-44"><a href="shiny.html#cb174-44" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;/&quot;</span>) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb174-45"><a href="shiny.html#cb174-45" aria-hidden="true" tabindex="-1"></a>  SMR0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)] <span class="ot">&lt;-</span> <span class="fu">sweep</span>(LocRisk0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)],<span class="dv">2</span>,smr.c<span class="sc">/</span><span class="dv">10</span>,<span class="st">&quot;*&quot;</span>)</span>
<span id="cb174-46"><a href="shiny.html#cb174-46" aria-hidden="true" tabindex="-1"></a>  WLR0 <span class="ot">&lt;-</span> <span class="fu">sweep</span>(tmp, <span class="dv">1</span>, </span>
<span id="cb174-47"><a href="shiny.html#cb174-47" aria-hidden="true" tabindex="-1"></a>       County.pop<span class="sc">$</span>population[<span class="fu">match</span>(dat<span class="sc">$</span>ID, County.pop<span class="sc">$</span>ID)], </span>
<span id="cb174-48"><a href="shiny.html#cb174-48" aria-hidden="true" tabindex="-1"></a>       <span class="st">&quot;/&quot;</span>) <span class="sc">*</span> <span class="fl">1e5</span></span>
<span id="cb174-49"><a href="shiny.html#cb174-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-50"><a href="shiny.html#cb174-50" aria-hidden="true" tabindex="-1"></a>  county.dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> date.all)</span>
<span id="cb174-51"><a href="shiny.html#cb174-51" aria-hidden="true" tabindex="-1"></a>  CountyState <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">as.character</span>(dat<span class="sc">$</span>County), </span>
<span id="cb174-52"><a href="shiny.html#cb174-52" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">as.character</span>(dat<span class="sc">$</span>State), <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb174-53"><a href="shiny.html#cb174-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-54"><a href="shiny.html#cb174-54" aria-hidden="true" tabindex="-1"></a>  LogI <span class="ot">&lt;-</span> <span class="fu">cbind</span>(county.dat,<span class="fu">round</span>(<span class="fu">t</span>(LogI0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]),<span class="dv">2</span>))</span>
<span id="cb174-55"><a href="shiny.html#cb174-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(LogI) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>, CountyState)</span>
<span id="cb174-56"><a href="shiny.html#cb174-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-57"><a href="shiny.html#cb174-57" aria-hidden="true" tabindex="-1"></a>  LocRisk <span class="ot">&lt;-</span> <span class="fu">cbind</span>(county.dat,<span class="fu">round</span>(<span class="fu">t</span>(LocRisk0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]),<span class="dv">2</span>))</span>
<span id="cb174-58"><a href="shiny.html#cb174-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(LocRisk) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>, CountyState)</span>
<span id="cb174-59"><a href="shiny.html#cb174-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-60"><a href="shiny.html#cb174-60" aria-hidden="true" tabindex="-1"></a>  SMR <span class="ot">&lt;-</span> <span class="fu">cbind</span>(county.dat,<span class="fu">t</span>(SMR0[,<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)]))</span>
<span id="cb174-61"><a href="shiny.html#cb174-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(SMR) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>, CountyState)</span>
<span id="cb174-62"><a href="shiny.html#cb174-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-63"><a href="shiny.html#cb174-63" aria-hidden="true" tabindex="-1"></a>  WLR <span class="ot">&lt;-</span> <span class="fu">cbind</span>(county.dat, <span class="fu">round</span>(<span class="fu">t</span>(WLR0), <span class="dv">2</span>))</span>
<span id="cb174-64"><a href="shiny.html#cb174-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(WLR) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Date&quot;</span>, CountyState)</span>
<span id="cb174-65"><a href="shiny.html#cb174-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-66"><a href="shiny.html#cb174-66" aria-hidden="true" tabindex="-1"></a>  xaxis.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;&quot;</span>, <span class="at">showline =</span> <span class="cn">FALSE</span>, </span>
<span id="cb174-67"><a href="shiny.html#cb174-67" aria-hidden="true" tabindex="-1"></a>                   <span class="at">showticklabels =</span> <span class="cn">TRUE</span>, <span class="at">showgrid =</span> <span class="cn">TRUE</span>, </span>
<span id="cb174-68"><a href="shiny.html#cb174-68" aria-hidden="true" tabindex="-1"></a>                   <span class="at">type =</span> <span class="st">&#39;date&#39;</span>, <span class="at">tickformat =</span> <span class="st">&#39;%m/%d&#39;</span>)</span>
<span id="cb174-69"><a href="shiny.html#cb174-69" aria-hidden="true" tabindex="-1"></a>  legend.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">orientation =</span> <span class="st">&#39;h&#39;</span>, <span class="at">x =</span> <span class="dv">0</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.05</span>, </span>
<span id="cb174-70"><a href="shiny.html#cb174-70" aria-hidden="true" tabindex="-1"></a>                    <span class="at">autosize =</span> F, <span class="at">width =</span> <span class="dv">250</span>, <span class="at">height =</span> <span class="dv">200</span>)</span>
<span id="cb174-71"><a href="shiny.html#cb174-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-72"><a href="shiny.html#cb174-72" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&#39;localrisk&#39;</span>){</span>
<span id="cb174-73"><a href="shiny.html#cb174-73" aria-hidden="true" tabindex="-1"></a>    ind.county <span class="ot">=</span> <span class="fu">order</span>(LocRisk0[,var.names[<span class="dv">1</span>]], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb174-74"><a href="shiny.html#cb174-74" aria-hidden="true" tabindex="-1"></a>    df.fr <span class="ot">&lt;-</span> LocRisk <span class="sc">%&gt;%</span></span>
<span id="cb174-75"><a href="shiny.html#cb174-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="sc">+</span> ind.county[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb174-76"><a href="shiny.html#cb174-76" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;County.State&quot;</span>, <span class="at">value =</span> <span class="st">&quot;LogI&quot;</span>, <span class="sc">-</span>Date)</span>
<span id="cb174-77"><a href="shiny.html#cb174-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(df.fr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>,<span class="st">&quot;group&quot;</span>,<span class="st">&quot;y&quot;</span>)</span>
<span id="cb174-78"><a href="shiny.html#cb174-78" aria-hidden="true" tabindex="-1"></a>    yaxis.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Local Risk (Cases per Thousand)&quot;</span>)</span>
<span id="cb174-79"><a href="shiny.html#cb174-79" aria-hidden="true" tabindex="-1"></a>    ts.fr <span class="ot">&lt;-</span> <span class="fu">ts.plotly</span>(df.fr, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, </span>
<span id="cb174-80"><a href="shiny.html#cb174-80" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb174-81"><a href="shiny.html#cb174-81" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> group, mycol, </span>
<span id="cb174-82"><a href="shiny.html#cb174-82" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">TRUE</span>, <span class="at">visible =</span> T,</span>
<span id="cb174-83"><a href="shiny.html#cb174-83" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xaxis =</span> xaxis.fr, <span class="at">yaxis =</span> yaxis.fr, </span>
<span id="cb174-84"><a href="shiny.html#cb174-84" aria-hidden="true" tabindex="-1"></a>                       <span class="at">legend =</span> legend.fr)</span>
<span id="cb174-85"><a href="shiny.html#cb174-85" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&#39;smr&#39;</span>){</span>
<span id="cb174-86"><a href="shiny.html#cb174-86" aria-hidden="true" tabindex="-1"></a>    ind.county <span class="ot">=</span> <span class="fu">order</span>(SMR0[,var.names[<span class="dv">1</span>]], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb174-87"><a href="shiny.html#cb174-87" aria-hidden="true" tabindex="-1"></a>    df.fr <span class="ot">&lt;-</span> SMR <span class="sc">%&gt;%</span></span>
<span id="cb174-88"><a href="shiny.html#cb174-88" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="sc">+</span> ind.county[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb174-89"><a href="shiny.html#cb174-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;County.State&quot;</span>, <span class="at">value =</span> <span class="st">&quot;LogI&quot;</span>, <span class="sc">-</span>Date)</span>
<span id="cb174-90"><a href="shiny.html#cb174-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(df.fr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>,<span class="st">&quot;group&quot;</span>,<span class="st">&quot;y&quot;</span>)</span>
<span id="cb174-91"><a href="shiny.html#cb174-91" aria-hidden="true" tabindex="-1"></a>    yaxis.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;SMR (%)&quot;</span>)</span>
<span id="cb174-92"><a href="shiny.html#cb174-92" aria-hidden="true" tabindex="-1"></a>    ts.fr <span class="ot">&lt;-</span> <span class="fu">ts.plotly</span>(df.fr, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, </span>
<span id="cb174-93"><a href="shiny.html#cb174-93" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb174-94"><a href="shiny.html#cb174-94" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> group, mycol, <span class="at">showlegend =</span> <span class="cn">TRUE</span>, </span>
<span id="cb174-95"><a href="shiny.html#cb174-95" aria-hidden="true" tabindex="-1"></a>                       <span class="at">visible =</span> T, <span class="at">xaxis =</span> xaxis.fr, </span>
<span id="cb174-96"><a href="shiny.html#cb174-96" aria-hidden="true" tabindex="-1"></a>                       <span class="at">yaxis =</span> yaxis.fr, <span class="at">legend =</span> legend.fr)</span>
<span id="cb174-97"><a href="shiny.html#cb174-97" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&#39;logcount&#39;</span>){</span>
<span id="cb174-98"><a href="shiny.html#cb174-98" aria-hidden="true" tabindex="-1"></a>    ind.county <span class="ot">=</span> <span class="fu">order</span>(dat[,var.names[<span class="dv">1</span>]], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb174-99"><a href="shiny.html#cb174-99" aria-hidden="true" tabindex="-1"></a>    df.fr <span class="ot">&lt;-</span> LogI <span class="sc">%&gt;%</span></span>
<span id="cb174-100"><a href="shiny.html#cb174-100" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="sc">+</span> ind.county[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb174-101"><a href="shiny.html#cb174-101" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;County.State&quot;</span>, <span class="at">value =</span> <span class="st">&quot;LogI&quot;</span>, <span class="sc">-</span>Date)</span>
<span id="cb174-102"><a href="shiny.html#cb174-102" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(df.fr) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;group&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb174-103"><a href="shiny.html#cb174-103" aria-hidden="true" tabindex="-1"></a>    yaxis.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Log Counts&quot;</span>)</span>
<span id="cb174-104"><a href="shiny.html#cb174-104" aria-hidden="true" tabindex="-1"></a>    ts.fr <span class="ot">&lt;-</span> <span class="fu">ts.plotly</span>(df.fr, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, </span>
<span id="cb174-105"><a href="shiny.html#cb174-105" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb174-106"><a href="shiny.html#cb174-106" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> group, mycol, </span>
<span id="cb174-107"><a href="shiny.html#cb174-107" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">TRUE</span>, <span class="at">visible =</span> T,</span>
<span id="cb174-108"><a href="shiny.html#cb174-108" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xaxis =</span> xaxis.fr, <span class="at">yaxis =</span> yaxis.fr, </span>
<span id="cb174-109"><a href="shiny.html#cb174-109" aria-hidden="true" tabindex="-1"></a>                       <span class="at">legend =</span> legend.fr)</span>
<span id="cb174-110"><a href="shiny.html#cb174-110" aria-hidden="true" tabindex="-1"></a>  }<span class="cf">else</span> <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">&#39;wlr&#39;</span>){</span>
<span id="cb174-111"><a href="shiny.html#cb174-111" aria-hidden="true" tabindex="-1"></a>    ind.county <span class="ot">&lt;-</span> <span class="fu">order</span>(WLR0[, var.names[<span class="dv">1</span>]], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb174-112"><a href="shiny.html#cb174-112" aria-hidden="true" tabindex="-1"></a>    df.fr <span class="ot">&lt;-</span> WLR <span class="sc">%&gt;%</span></span>
<span id="cb174-113"><a href="shiny.html#cb174-113" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span> <span class="sc">+</span> ind.county[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb174-114"><a href="shiny.html#cb174-114" aria-hidden="true" tabindex="-1"></a>      <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">&quot;CountyState&quot;</span>, <span class="at">value =</span> <span class="st">&quot;WLR&quot;</span>, <span class="sc">-</span>Date)</span>
<span id="cb174-115"><a href="shiny.html#cb174-115" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(df.fr) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;group&quot;</span>, <span class="st">&quot;y&quot;</span>)</span>
<span id="cb174-116"><a href="shiny.html#cb174-116" aria-hidden="true" tabindex="-1"></a>    yaxis.fr <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;WLR (New Cases Per 100K)&quot;</span>)</span>
<span id="cb174-117"><a href="shiny.html#cb174-117" aria-hidden="true" tabindex="-1"></a>    ts.fr <span class="ot">&lt;-</span> <span class="fu">ts.plotly</span>(df.fr, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, </span>
<span id="cb174-118"><a href="shiny.html#cb174-118" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb174-119"><a href="shiny.html#cb174-119" aria-hidden="true" tabindex="-1"></a>                       <span class="at">group =</span> group, mycol, </span>
<span id="cb174-120"><a href="shiny.html#cb174-120" aria-hidden="true" tabindex="-1"></a>                       <span class="at">showlegend =</span> <span class="cn">TRUE</span>, <span class="at">visible =</span> T,</span>
<span id="cb174-121"><a href="shiny.html#cb174-121" aria-hidden="true" tabindex="-1"></a>                       <span class="at">xaxis =</span> xaxis.fr, <span class="at">yaxis =</span> yaxis.fr, </span>
<span id="cb174-122"><a href="shiny.html#cb174-122" aria-hidden="true" tabindex="-1"></a>                       <span class="at">legend =</span> legend.fr)</span>
<span id="cb174-123"><a href="shiny.html#cb174-123" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb174-124"><a href="shiny.html#cb174-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ts.fr)</span>
<span id="cb174-125"><a href="shiny.html#cb174-125" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb174-126"><a href="shiny.html#cb174-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-127"><a href="shiny.html#cb174-127" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyServer</span>(<span class="cf">function</span>(input, output) {</span>
<span id="cb174-128"><a href="shiny.html#cb174-128" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>county_risk_ts <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb174-129"><a href="shiny.html#cb174-129" aria-hidden="true" tabindex="-1"></a>    ts <span class="ot">&lt;-</span> <span class="fu">county.risk.ts</span>(date.update, <span class="at">type =</span> input<span class="sc">$</span>plot_type)</span>
<span id="cb174-130"><a href="shiny.html#cb174-130" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb174-131"><a href="shiny.html#cb174-131" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>If everything is working correctly you’ll see the application appear in your browser looking something like this:</p>
<div class="figure">
<img src="figures/county_risk_ts.png" alt="" />
<p class="caption">The time series plot of risk or log(count) of the top ten counties (based on the corresponding measurement on 12/11/2011).</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="plotly.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="map.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["SLID_book.pdf", "SLID_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
